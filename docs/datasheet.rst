Datasheet
=========
``Base File Index`` equals to :ref:`start-block` **0x2c0** (**BFI**)

Headers format and structures
-----------------------------
.. note::

    Information about **data type** you can access with
    `official python documentation <http://docs.python.org/2/library/ctypes.html#fundamental-data-types>`_

+-----------------+---------+------------+-----------------------------------+---------------------+
| Offset (from the| Size    | Data Type  | Explain                           | Value               |
| begging)        |         |            |                                   |                     |
+=================+=========+============+===================================+=====================+
|                                        | **File General Header**           |                     |
+-----------------+---------+------------+-----------------------------------+---------------------+
| **0x00**        | 4 bytes | c_char_p   | Probably file format container    |                     |
+-----------------+---------+------------+-----------------------------------+---------------------+
| **0x04**        | 4 bytes | c_uint32   | could be a separator              |**\x00\x00\x00\x00** |
+-----------------+---------+------------+-----------------------------------+---------------------+
| **0x08**        | 4 bytes | c_uint32   | Unknown data                      |                     |
+-----------------+---------+------------+-----------------------------------+---------------------+
| **0x0c**        | 4 bytes | c_uint32   | could be real block data          | hex: **0xB**        |
|                 |         |            | stored in whole file              | dec: **11**         |
+-----------------+---------+------------+-----------------------------------+---------------------+
| **0x10**        | 4 bytes | c_uint32   | Unknown data                      |                     |
+-----------------+---------+------------+-----------------------------------+---------------------+
| **0x14**        | 4 bytes | c_uint32   | could be a separator              |**\x00\x00\x00\x00** |
+-----------------+---------+------------+-----------------------------------+---------------------+
| **0x18**        | 8 bytes | c_char_p   | It seems a version of document or | string: **00000001**|
|                 |         |            | application                       |                     |
+-----------------+---------+------------+-----------------------------------+---------------------+
| **0x20**        | 4 bytes | c_uint32   | Unknown data                      | hex: **0x20**       |
|                 |         |            |                                   | dec: **32**         |
+-----------------+---------+------------+-----------------------------------+---------------------+
| **0x24**        | 4 bytes | c_uint32   | could be a separator              |**\x00\x00\x00\x00** |
+-----------------+---------+------------+-----------------------------------+---------------------+
| **0x28**        | 4 bytes | c_uint32   | First data block offset from the  | hex: **0x2c0**      |
|                 |         |            | of the file :ref:`start-block`    | dec: **704**        |
+-----------------+---------+------------+-----------------------------------+---------------------+
| **0x2c**        | 4 bytes | c_uint32   | could be a separator              |**\x00\x00\x00\x00** |
+-----------------+---------+------------+-----------------------------------+---------------------+
| **0x30**        | 4 bytes | c_uint32   | Unknown data (0x0120->8193)       |                     |
|                 |         |            |                                   |                     |
+-----------------+---------+------------+-----------------------------------+---------------------+
| **0x34**,       | 4 bytes | c_uint32   | Unknown block of data:            | **\x00\x00\x00\x00**|
| **0x38**,       | * 3     |            |                                   | 3 times             |
| **0x3c**        |         |            |                                   |                     |
+-----------------+---------+------------+-----------------------------------+---------------------+
|                                        |**Start containers header metadata (11 blocks)**         |
|                                        |(*datasheet below represents only 1 of 11th data blocks*)|
+-----------------+---------+------------+-----------------------------------+---------------------+
| **0x40**        | 4 bytes | c_uint32   | Container Header separator High   | hex: **0x50**       |
|                 |         |            |                                   | dec: **80**         |
+-----------------+---------+------------+-----------------------------------+---------------------+
| **0x44**        | 4 bytes | c_uint32   | Container Header separator Low    | hex: **0xFFFF**     |
+-----------------+---------+------------+-----------------------------------+---------------------+
|                                        |**End of container header metadata**                     |
+-----------------+---------+------------+-----------------------------------+---------------------+
| **Containers data** 1 block example represented                            |                     |
+-----------------+---------+------------+-----------------------------------+---------------------+
| **0x48**        | 4 bytes | c_uint32   | Block data size                   |                     |
|                 |         |            |                                   |                     |
+-----------------+---------+------------+-----------------------------------+---------------------+
| **0x4c**        | 4 bytes | c_uint32   | could be a separator              |**\x00\x00\x00\x00** |
+-----------------+---------+------------+-----------------------------------+---------------------+
| **0x50**        | 4 bytes | c_uint32   | data block start offset from the  |                     |
|                 |         |            | file beginning                    |                     |
|                 |         |            |                                   |                     |
+-----------------+---------+------------+-----------------------------------+---------------------+
| **0x54**        | 4 bytes | c_uint32   | Unknown data, could be an some    |                     |
|                 |         |            | sort of offsets ?                 |                     |
+-----------------+---------+------------+-----------------------------------+---------------------+
| **0x58**        | 4 bytes | c_uint32   | Unknown block of data             | hex: **0x04**       |
|                 |         |            | (4h->4)                           | dec: **04**         |
+-----------------+---------+------------+-----------------------------------+---------------------+
| **0x5c**        | 4 bytes | c_uint32   | could be a separator              |**\x00\x00\x00\x00** |
+-----------------+---------+------------+-----------------------------------+---------------------+
|                                        | **End of Containers header data**                       |
+-----------------+---------+------------+-----------------------------------+---------------------+
|                                        | **End of Containers**             |                     |
+-----------------+---------+------------+-----------------------------------+---------------------+
|                                         **0x1A0** => **0x2Bf**             |                     |
|                                         ``USER_DATA xxx`` representation   |                     |
|                                         in following format                |                     |
+-----------------+---------+------------+-----------------------------------+---------------------+
| **0x1A0**       |26 bytes | c_char_p   | string sequence                   |USER_DATA 000\x00    |
+-----------------+---------+------------+-----------------------------------+---------------------+
| **0x1BA**       |26 bytes | c_char_p   | string sequence                   |USER_DATA 001\x00    |
+-----------------+---------+------------+-----------------------------------+---------------------+
|                                        | **And so on until**               |                     |
|                                        | ``USER_DATA 010\x00`` **sequence**|                     |
+-----------------+---------+------------+-----------------------------------+---------------------+
| **0x2bc**       | 4 bytes | c_uint32   | separator                         | **\x00\x00\x00\x00**|
+-----------------+---------+------------+-----------------------------------+---------------------+
|                                        | **End of File General Header**    |                     |
+-----------------+---------+------------+-----------------------------------+---------------------+

.. _start-block:

Start block
-----------
.. note::

    **0x2c** starts with first character data. Character data is under heavily
    process of reverse engineering, so there is only some simple bunch of data
    represented withing different blocks/structures such like as :ref:`stats`,
    :ref:`items`

.. _stats:

Stats
-----
.. note::

    All character statistics depending on items/primary stats (vitality->resistance)
    are dynamicly-calculated type of data. So there's no reason to store it or
    modify it via runtime. Therefore only two of this type of data present in
    the table below. it's Capacity and Physical defence.

.. note::

    General stats such like as Vitality, Attunement, Strength and so on stored
    in RAM with given offsets listed in 3rd table column. But their real address
    slightly different from save file one, be warned.
    For example if Vitality has **0x7C563C00** address then Attunement is certainly
    with 0x08 offset further and stored into **0x7C563C08**

+-----------+--------------------------+-------------------------+
| Parameter | Amount of memory entries | Amount of store entries |
|           | (ingame)                 | (save file)             |
+===========+==========================+=========================+
| Stamina   | 3 slots, 4 byte          | BFI + **0x88**          |
|           |                          | (and **0x8c**, **0x90**)|
+-----------+--------------------------+-------------------------+
| Vitality  | 1 slot, 4 byte           | BFI + **0x98**          |
+-----------+--------------------------+-------------------------+
| Attunement| 1 slot, 4 byte           | BFI + **0xa0**          |
+-----------+--------------------------+-------------------------+
| Endurance | 1 slot, 4 byte           | BFI + **0xa8**          |
+-----------+--------------------------+-------------------------+
| Strength  | 1 slot, 4 byte           | BFI + **0xb0**          |
+-----------+--------------------------+-------------------------+
| Dexterity | 1 slot, 4 byte           | BFI + **0xb8**          |
+-----------+--------------------------+-------------------------+
| Intel.    | 1 slot, 4 byte           | BFI + **0xc0**          |
+-----------+--------------------------+-------------------------+
| Faith     | 1 slot, 4 byte           | BFI + **0xc8**          |
+-----------+--------------------------+-------------------------+
| Unknown   | 1 slot, 4 byte (unsigned)| BFI + **0xd0**          |
+-----------+--------------------------+-------------------------+
| Humanity  | 1 slot, 4 byte           | BFI + **0xd8**          |
+-----------+--------------------------+-------------------------+
| Resistance| 1 slot, 4 byte           | BFI + **0xe0**          |
+-----------+--------------------------+-------------------------+
| Level     | 1 slot, 4 byte           | BFI + **0xe8**          |
+-----------+--------------------------+-------------------------+
| Souls     | 1 slot, 4 byte           | BFI + **0xec**          |
+-----------+--------------------------+-------------------------+
| Collected |                          |                         |
| Souls     | 1 slot, 4 byte           | BFI + **0xf0**          |
+-----------+--------------------------+-------------------------+
| Name      | 1 slot, 28 byte          |                         |
|           | 13*2 = name, 1 = **0x00**| BFI + **0x100**         |
+-----------+--------------------------+-------------------------+
| Gender    | 1 slot, 1 byte           | BFI + **0x122**         |
| (male)    | 0 - female, 1 - male     |                         |
+-----------+--------------------------+-------------------------+
| Class     | 1 slot, 1 byte           | BFI + **0x126**         |
+-----------+--------------------------+-------------------------+
| Body      | 1 slot, 1 byte           | BFI + **0x127**         |
+-----------+--------------------------+-------------------------+
| Gift      | 1 slot, 1 byte           | BFI + **0x128**         |
+-----------+--------------------------+-------------------------+
| Face      | 1 slot, 1 byte           | BFI + **0x16c**         |
+-----------+--------------------------+-------------------------+
| Haris     | 1 slot, 1 byte           | BFI + **0x16d**         |
+-----------+--------------------------+-------------------------+
| Color     | 1 slot, 1 byte           | BFI + **0x16e**         |
+-----------+--------------------------+-------------------------+
| Deaths    | 1 slot, 1 byte           | BFI + **0x1f128**       |
+-----------+--------------------------+-------------------------+
| **Dynamicly-calculated data**                                  |
+-----------+--------------------------+-------------------------+
| Capacity  | 2 slots 4 byte float     | Offsets don't concure   |
|           | (evaluateable)           | with memory ones        |
+-----------+--------------------------+-------------------------+
| Physical  | 6 slots 4 byte           | Offsets do not concure  |
| defence   | (evaluateable)           | with memory offsets     |
+-----------+--------------------------+-------------------------+

.. _items:

Items
-----

+-------------------+--------------------------+-------------------------+
| Item              | Amount of memory entries | Amount of store entries |
|                   | (ingame)                 | (save file)             |
+===================+==========================+=========================+
| Flask of estus    | 3 slot, 1 active -> 2    | 1 slot: 0x60FF8(random) |
|                   | depends on active        |                         |
+-------------------+--------------------------+-------------------------+


Items store structure
~~~~~~~~~~~~~~~~~~~~~
.. code-block:: python

    from ctypes import *
    item_proto_structure = {'type': c_uint32, 'amount': c_uint32}


+-------------------+----------------------------------------------------+
| Item Type         |  Ingame Item title                                 |
|                   |                                                    |
+===================+====================================================+
| 0xC9 (201)        | Estus Flask (active)                               |
+-------------------+----------------------------------------------------+
| 0xCA (202)        | Estus Flask (empty)                                |
+-------------------+----------------------------------------------------+
| 0xCB (203)        | Estus Flask +1                                     |
+-------------------+----------------------------------------------------+
| 0xCC (204)        | Estus Flask +1 (empty)                             |
+-------------------+----------------------------------------------------+
| 0xCD (205)        | Estus Flask +2                                     |
+-------------------+----------------------------------------------------+
| 0xCE (206)        | Estus Flask +3 (empty)                             |
+-------------------+----------------------------------------------------+
| 0xCF (207)        | Estus Flask +3                                     |
+-------------------+----------------------------------------------------+
| 0xD0 (208)        | Estus Flask +4 (empty)                             |
+-------------------+----------------------------------------------------+
| 0xD1 (209)        | Estus Flask +4                                     |
+-------------------+----------------------------------------------------+
| 0xD2 (210)        | Estus Flask +5 (empty)                             |
+-------------------+----------------------------------------------------+
| 0xD3 (211)        | Estus Flask +5                                     |
+-------------------+----------------------------------------------------+
| 0xD4 (212)        | Estus Flask +6 (empty)                             |
+-------------------+----------------------------------------------------+
| 0xD5 (213)        | Estus Flask +6                                     |
+-------------------+----------------------------------------------------+
| 0xD6 (214)        | Estus Flask +7 (empty)                             |
+-------------------+----------------------------------------------------+
| 0xD7 (215)        | Estus Flask +7                                     |
+-------------------+----------------------------------------------------+

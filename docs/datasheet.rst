Datasheet
=========
``Base File Index`` equals to :ref:`start-block` **0x2c0** (**BFI**)


Headers format and structures
-----------------------------
.. note::

    Information about **data type** you can access with
    `official python documentation <http://docs.python.org/2/library/ctypes.html#fundamental-data-types>`_

+-----------------+---------+------------+-----------------------------------+---------------------+
| Offset (from the| Size    | Data Type  | Explain                           | Value               |
| begging)        |         |            |                                   |                     |
+=================+=========+============+===================================+=====================+
|                                        | **File General Header**           |                     |
+-----------------+---------+------------+-----------------------------------+---------------------+
| **0x00**        | 4 bytes | c_char_p   | Probably file format container    |                     |
+-----------------+---------+------------+-----------------------------------+---------------------+
| **0x04**        | 4 bytes | c_uint32   | could be a separator              |**\x00\x00\x00\x00** |
+-----------------+---------+------------+-----------------------------------+---------------------+
| **0x08**        | 4 bytes | c_uint32   | Unknown data                      |                     |
+-----------------+---------+------------+-----------------------------------+---------------------+
| **0x0c**        | 4 bytes | c_uint32   | could be real block data          | hex: **0xB**        |
|                 |         |            | stored in whole file              | dec: **11**         |
+-----------------+---------+------------+-----------------------------------+---------------------+
| **0x10**        | 4 bytes | c_uint32   | Unknown data                      |                     |
+-----------------+---------+------------+-----------------------------------+---------------------+
| **0x14**        | 4 bytes | c_uint32   | could be a separator              |**\x00\x00\x00\x00** |
+-----------------+---------+------------+-----------------------------------+---------------------+
| **0x18**        | 8 bytes | c_char_p   | It seems a version of document or | string: **00000001**|
|                 |         |            | application                       |                     |
+-----------------+---------+------------+-----------------------------------+---------------------+
| **0x20**        | 4 bytes | c_uint32   | Unknown data                      | hex: **0x20**       |
|                 |         |            |                                   | dec: **32**         |
+-----------------+---------+------------+-----------------------------------+---------------------+
| **0x24**        | 4 bytes | c_uint32   | could be a separator              |**\x00\x00\x00\x00** |
+-----------------+---------+------------+-----------------------------------+---------------------+
| **0x28**        | 4 bytes | c_uint32   | First data block offset from the  | hex: **0x2c0**      |
|                 |         |            | of the file :ref:`start-block`    | dec: **704**        |
+-----------------+---------+------------+-----------------------------------+---------------------+
| **0x2c**        | 4 bytes | c_uint32   | could be a separator              |**\x00\x00\x00\x00** |
+-----------------+---------+------------+-----------------------------------+---------------------+
| **0x30**        | 4 bytes | c_uint32   | Unknown data (0x0120->8193)       |                     |
|                 |         |            |                                   |                     |
+-----------------+---------+------------+-----------------------------------+---------------------+
| **0x34**,       | 4 bytes | c_uint32   | Unknown block of data:            | **\x00\x00\x00\x00**|
| **0x38**,       | * 3     |            |                                   | 3 times             |
| **0x3c**        |         |            |                                   |                     |
+-----------------+---------+------------+-----------------------------------+---------------------+
|                                        |**Start containers header metadata (11 blocks)**         |
|                                        |(*datasheet below represents only 1 of 11th data blocks*)|
+-----------------+---------+------------+-----------------------------------+---------------------+
| **0x40**        | 4 bytes | c_uint32   | Container Header separator High   | hex: **0x50**       |
|                 |         |            |                                   | dec: **80**         |
+-----------------+---------+------------+-----------------------------------+---------------------+
| **0x44**        | 4 bytes | c_uint32   | Container Header separator Low    | hex: **0xFFFF**     |
+-----------------+---------+------------+-----------------------------------+---------------------+
|                                        |**End of container header metadata**                     |
+-----------------+---------+------------+-----------------------------------+---------------------+
| **Containers data** 1 block example represented                            |                     |
+-----------------+---------+------------+-----------------------------------+---------------------+
| **0x48**        | 8 bytes | c_ulong    | Block data size (in bytes)        |                     |
|                 |         |            |                                   |                     |
+-----------------+---------+------------+-----------------------------------+---------------------+
| **0x50**        | 4 bytes | c_uint32   | data block start offset from the  |                     |
|                 |         |            | file beginning                    |                     |
|                 |         |            |                                   |                     |
+-----------------+---------+------------+-----------------------------------+---------------------+
| **0x54**        | 4 bytes | c_uint32   | Unknown data, could be an some    |                     |
|                 |         |            | sort of offsets ?                 |                     |
+-----------------+---------+------------+-----------------------------------+---------------------+
| **0x58**        | 4 bytes | c_uint32   | Skip the amount of bytes block    | hex: **0x04**       |
|                 |         |            | (4h->4)                           | dec: **04**         |
+-----------------+---------+------------+-----------------------------------+---------------------+
| **0x5c**        | 4 bytes | c_uint32   | could be a separator              |**\x00\x00\x00\x00** |
|                 |         |            | useless block or just 8 byte for  |                     |
|                 |         |            | **0x58** block                    |                     |
+-----------------+---------+------------+-----------------------------------+---------------------+
|                                        | **End of Containers header data**                       |
+-----------------+---------+------------+-----------------------------------+---------------------+
|                                        | **End of Containers**             |                     |
+-----------------+---------+------------+-----------------------------------+---------------------+
|                                         **0x1A0** => **0x2Bf**             |                     |
|                                         ``USER_DATA xxx`` representation   |                     |
|                                         in following format                |                     |
+-----------------+---------+------------+-----------------------------------+---------------------+
| **0x1A0**       |26 bytes | c_char_p   | string sequence                   |USER_DATA 000\x00    |
+-----------------+---------+------------+-----------------------------------+---------------------+
| **0x1BA**       |26 bytes | c_char_p   | string sequence                   |USER_DATA 001\x00    |
+-----------------+---------+------------+-----------------------------------+---------------------+
|                                        | **And so on until**               |                     |
|                                        | ``USER_DATA 010\x00`` **sequence**|                     |
+-----------------+---------+------------+-----------------------------------+---------------------+
| **0x2bc**       | 4 bytes | c_uint32   | separator                         | **\x00\x00\x00\x00**|
+-----------------+---------+------------+-----------------------------------+---------------------+
|                                        | **End of File General Header**    |                     |
+-----------------+---------+------------+-----------------------------------+---------------------+

.. _slot-block:

Slot block
----------

Slot block data contains very useful information, stats, items, deaths count
and so on

+-----------------+---------+------------+-----------------------------------+---------------------+
| Offset (from the| Size    | Data Type  | Explain                           | Value               |
| begging of slot |         |            |                                   |                     |
| block)          |         |            |                                   |                     |
+=================+=========+============+===================================+=====================+
| **0x6c**        | 4 Bytes | c_uint32   | Health bar current                | Depends on stats    |
|                 |         |            |                                   | **600**             |
+-----------------+---------+------------+-----------------------------------+---------------------+
| **0x70**        | 4 Bytes | c_uint32   | Health bar                        | Depends on stats    |
|                 |         |            |                                   | **600**             |
+-----------------+---------+------------+-----------------------------------+---------------------+
| **0x88**        | 4 Bytes | c_uint32   | Stamina                           | Depends on stats    |
|                 |         |            |                                   | max: **160**        |
+-----------------+---------+------------+-----------------------------------+---------------------+
| **0x8c**        | 4 Bytes | c_uint32   | Stamina 2                         | Depends on stats    |
|                 |         |            |                                   | max: **160**        |
+-----------------+---------+------------+-----------------------------------+---------------------+
| **0x90**        | 4 Bytes | c_uint32   | Stamina 3                         | Depends on stats    |
|                 |         |            |                                   | max: **160**        |
+-----------------+---------+------------+-----------------------------------+---------------------+
| **0x98**        | 4 Bytes | c_uint32   | Vitality                          | Depends on level    |
|                 |         |            |                                   | and so on (**30**)  |
+-----------------+---------+------------+-----------------------------------+---------------------+
| **0xa0**        | 4 Bytes | c_uint32   | Attunement                        | Depends on level    |
|                 |         |            |                                   | and so on (**10**)  |
+-----------------+---------+------------+-----------------------------------+---------------------+
| **0xa8**        | 4 Bytes | c_uint32   | Endurance                         | Depends on level    |
|                 |         |            |                                   | and so on (**50**)  |
+-----------------+---------+------------+-----------------------------------+---------------------+
| **0xb0**        | 4 Bytes | c_uint32   | Strength                          | Depends on level    |
|                 |         |            |                                   | and so on (**50**)  |
+-----------------+---------+------------+-----------------------------------+---------------------+
| **0xb8**        | 4 Bytes | c_uint32   | Dextirity                         | Depends on level    |
|                 |         |            |                                   | and so on (**20**)  |
+-----------------+---------+------------+-----------------------------------+---------------------+
| **0xc0**        | 4 Bytes | c_uint32   | Intelligence                      | Depends on level    |
|                 |         |            |                                   | and so on (**10**)  |
+-----------------+---------+------------+-----------------------------------+---------------------+
| **0xc8**        | 4 Bytes | c_uint32   | Faith                             | Depends on level    |
|                 |         |            |                                   | and so on (**10**)  |
+-----------------+---------+------------+-----------------------------------+---------------------+
| **0xd8**        | 4 Bytes | c_uint32   | Humanity                          | Depends on level    |
|                 |         |            |                                   | and so on (**00**)  |
+-----------------+---------+------------+-----------------------------------+---------------------+
| **0xe0**        | 4 Bytes | c_uint32   | Resistance                        | Depends on level    |
|                 |         |            |                                   | and so on (**11**)  |
+-----------------+---------+------------+-----------------------------------+---------------------+
| **0xe8**        | 4 Bytes | c_uint32   | Level                             | Depends on level    |
|                 |         |            |                                   | and so on (**11**)  |
+-----------------+---------+------------+-----------------------------------+---------------------+
| **0xec**        | 4 Bytes | c_uint32   | Souls                             | Depends on level    |
|                 |         |            |                                   | and so on (**9312**)|
+-----------------+---------+------------+-----------------------------------+---------------------+
| **0xf0**        | 4 Bytes | c_uint32   | Earned souls                      | Depends on level    |
|                 |         |            |                                   | and so on (**9991**)|
+-----------------+---------+------------+-----------------------------------+---------------------+
| **0x100**       | 28 Bytes| c_char_p   | Character's name                  | Depends on your     |
|                 |         |            |                                   | imagination         |
|                 |         |            |                                   | (**Nick**)          |
+-----------------+---------+------------+-----------------------------------+---------------------+
| **0x122**       | 1 Bytes | c_bool     | Male                              | Depends on your     |
|                 |         |            |                                   | choice (**1**)      |
+-----------------+---------+------------+-----------------------------------+---------------------+
| **0x126**       | 1 Bytes | c_uint8    | Class                             | Depends on your     |
|                 |         |            |                                   | choice (**6**)      |
+-----------------+---------+------------+-----------------------------------+---------------------+
| **0x127**       | 1 Bytes | c_uint8    | Body                              | Depends on your     |
|                 |         |            |                                   | choice (**0**)      |
+-----------------+---------+------------+-----------------------------------+---------------------+
| **0x128**       | 1 Bytes | c_uint8    | Gift                              | Depends on your     |
|                 |         |            |                                   | choice (**1**)      |
+-----------------+---------+------------+-----------------------------------+---------------------+
| **0x16c**       | 1 Bytes | c_uint8    | Face                              | Depends on your     |
|                 |         |            |                                   | choice (**6**)      |
+-----------------+---------+------------+-----------------------------------+---------------------+
| **0x16d**       | 1 Bytes | c_uint8    | Hairs                             | Depends on your     |
|                 |         |            |                                   | choice (**6**)      |
+-----------------+---------+------------+-----------------------------------+---------------------+
| **0x16e**       | 1 Bytes | c_uint8    | Color                             | Depends on your     |
|                 |         |            |                                   | choice (**6**)      |
+-----------------+---------+------------+-----------------------------------+---------------------+
| skip                                                                                             |
+-----------------+---------+------------+-----------------------------------+---------------------+
| **0x2c0**       | 4 Bytes | c_uint32   | First quick slot item type        | Any accessible item |
|                 |         |            |                                   | type (203 for ex.)  |
+-----------------+---------+------------+-----------------------------------+---------------------+
| **0x2c4**       | 4 Bytes | c_uint32   | Second quick slot item type       | Any accessible item |
|                 |         |            |                                   | type (203 for ex.)  |
+-----------------+---------+------------+-----------------------------------+---------------------+
| **0x2c8**       | 4 Bytes | c_uint32   | Third quick slot item type        | Any accessible item |
|                 |         |            |                                   | type (203 for ex.)  |
+-----------------+---------+------------+-----------------------------------+---------------------+
| **0x2cc**       | 4 Bytes | c_uint32   | Fourth quick slot item type       | Any accessible item |
|                 |         |            |                                   | type (203 for ex.)  |
+-----------------+---------+------------+-----------------------------------+---------------------+
| **0x2d0**       | 4 Bytes | c_uint32   | Fifth quick slot item type        | Any accessible item |
|                 |         |            |                                   | type (203 for ex.)  |
+-----------------+---------+------------+-----------------------------------+---------------------+
| skip                                                                                             |
+-----------------+---------+------------+-----------------------------------+---------------------+
| **0x1f128**     | 4 Bytes | c_uint32   | Deaths                            | Depends on your     |
|                 |         |            |                                   | skill :D (**155**)  |
+-----------------+---------+------------+-----------------------------------+---------------------+

.. _start-block:

Start block
-----------
.. note::

    **0x2c** starts with first character data. Character data is under heavily
    process of reverse engineering, so there is only some simple bunch of data
    represented withing different blocks/structures such like as :ref:`stats`,
    :ref:`items`.

.. _stats:

Stats
-----
.. note::

    All character statistics depending on items/primary stats (vitality->resistance)
    are dynamicly-calculated type of data. So there's no reason to store it or
    modify it via runtime. Therefore only two of this type of data present in
    the table below. it's Capacity and Physical defence.

.. note::

    General stats such like as Vitality, Attunement, Strength and so on stored
    in RAM with given offsets listed in 3rd table column. But their real address
    slightly different from save file one, be warned.
    For example if Vitality has **0x7C563C00** address then Attunement is certainly
    with 0x08 offset further and stored into **0x7C563C08**

+-----------+--------------------------+-------------------------+
| Parameter | Amount of memory entries | Amount of store entries |
|           | (ingame)                 | (save file)             |
+===========+==========================+=========================+
| Stamina   | 3 slots, 4 byte          | BFI + **0x88**          |
|           |                          | (and **0x8c**, **0x90**)|
+-----------+--------------------------+-------------------------+
| Vitality  | 1 slot, 4 byte           | BFI + **0x98**          |
+-----------+--------------------------+-------------------------+
| Attunement| 1 slot, 4 byte           | BFI + **0xa0**          |
+-----------+--------------------------+-------------------------+
| Endurance | 1 slot, 4 byte           | BFI + **0xa8**          |
+-----------+--------------------------+-------------------------+
| Strength  | 1 slot, 4 byte           | BFI + **0xb0**          |
+-----------+--------------------------+-------------------------+
| Dexterity | 1 slot, 4 byte           | BFI + **0xb8**          |
+-----------+--------------------------+-------------------------+
| Intel.    | 1 slot, 4 byte           | BFI + **0xc0**          |
+-----------+--------------------------+-------------------------+
| Faith     | 1 slot, 4 byte           | BFI + **0xc8**          |
+-----------+--------------------------+-------------------------+
| Unknown   | 1 slot, 4 byte (unsigned)| BFI + **0xd0**          |
+-----------+--------------------------+-------------------------+
| Humanity  | 1 slot, 4 byte           | BFI + **0xd8**          |
+-----------+--------------------------+-------------------------+
| Resistance| 1 slot, 4 byte           | BFI + **0xe0**          |
+-----------+--------------------------+-------------------------+
| Level     | 1 slot, 4 byte           | BFI + **0xe8**          |
+-----------+--------------------------+-------------------------+
| Souls     | 1 slot, 4 byte           | BFI + **0xec**          |
+-----------+--------------------------+-------------------------+
| Collected |                          |                         |
| Souls     | 1 slot, 4 byte           | BFI + **0xf0**          |
+-----------+--------------------------+-------------------------+
| Name      | 1 slot, 28 byte          |                         |
|           | 13*2 = name, 1 = **0x00**| BFI + **0x100**         |
+-----------+--------------------------+-------------------------+
| Gender    | 1 slot, 1 byte           | BFI + **0x122**         |
| (male)    | 0 - female, 1 - male     |                         |
+-----------+--------------------------+-------------------------+
| Class     | 1 slot, 1 byte           | BFI + **0x126**         |
+-----------+--------------------------+-------------------------+
| Body      | 1 slot, 1 byte           | BFI + **0x127**         |
+-----------+--------------------------+-------------------------+
| Gift      | 1 slot, 1 byte           | BFI + **0x128**         |
+-----------+--------------------------+-------------------------+
| Face      | 1 slot, 1 byte           | BFI + **0x16c**         |
+-----------+--------------------------+-------------------------+
| Haris     | 1 slot, 1 byte           | BFI + **0x16d**         |
+-----------+--------------------------+-------------------------+
| Color     | 1 slot, 1 byte           | BFI + **0x16e**         |
+-----------+--------------------------+-------------------------+
| Deaths    | 1 slot, 1 byte           | BFI + **0x1f128**       |
+-----------+--------------------------+-------------------------+
| **Dynamicly-calculated data**                                  |
+-----------+--------------------------+-------------------------+
| Capacity  | 2 slots 4 byte float     | Offsets don't concure   |
|           | (evaluateable)           | with memory ones        |
+-----------+--------------------------+-------------------------+
| Physical  | 6 slots 4 byte           | Offsets do not concure  |
| defence   | (evaluateable)           | with memory offsets     |
+-----------+--------------------------+-------------------------+

.. _items:

Items
-----

General items and weapons/armour structure
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

.. code-block:: python

    from ctypes import
    weapon_proto_structure = {
        'stored': c_uint32,           # see table below
        'type': c_uint32,             # item type
        'amount', c_uint32,           # have amount
        'position': c_uint32,         # position?
        'have': c_uint32,             # have
        'durability': c_uint32,       # item durability
        'durability_hits': c_uint32,  # 0->9
    }

+-------------------+--------------------------+-------------------------+
| Field             | Possible values          | Explanation             |
+===================+==========================+=========================+
| stored            | * 0xFFFFFFFF             | * clean slot            |
|                   | * 0x10000000             | * weapons stored        |
|                   | * 0x20000000             | * armour stored         |
|                   | * 0x30000000             | * unknown data          |
|                   | * 0x40000000             | * items/bolts stored    |
+-------------------+--------------------------+-------------------------+
| type              | see :ref:`items-type`    |item/weapon/armour type  |
|                   | and so on                |                         |
+-------------------+--------------------------+-------------------------+
| amount            | 0x00000000 to 0xFFFFFFFF | how much do you have it?|
|                   | probably                 |                         |
+-------------------+--------------------------+-------------------------+
| position          | some big numbers         | could be some pointer or|
|                   | (didn't parsed for till  | address for backpack    |
|                   | moment)                  | navigation              |
+-------------------+--------------------------+-------------------------+
| have              | 0x00000001 or 0x00000000 | do you have it?         |
|                   | yes or no                |                         |
+-------------------+--------------------------+-------------------------+
| durability        | Depends on weapon or     | Depends on item if it   |
|                   | armour                   | has dur. statement      |
+-------------------+--------------------------+-------------------------+
| durability_hits   | 0x00000000 to 0x00000009 | Stack counter from 0 to |
|                   |                          | 9 each circle weapon    |
|                   |                          | or armour losts its     |
|                   |                          | ``durability`` point    |
+-------------------+--------------------------+-------------------------+

.. _items-type:

Items type
~~~~~~~~~~
.. include:: data/items.rst

Weapons and armour type
~~~~~~~~~~~~~~~~~~~~~~~
.. include:: data/weapons.rst